<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div class="container">
    <div id="box">
        <img id="img">
    </div>
</div>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js" integrity="sha512-q/dWJ3kcmjBLU4Qc47E4A9kTB4m3wuTY7vkFJDTZKjTs8jhyGQnaUrxa0Ytd0ssMZhbNua9hE+E7Qv1j+DyZwA==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/web-animations/2.2.1/web-animations-next.min.js"></script>

<script>
    function move(image){

        const el = document.querySelector("#box");
        const imm = document.querySelector('#img');
        imm.src=image;

        //el.style.height = innerHeight/4 + "px";
        //el.style.width = innerWidth/4 + "px";

        //In questo modo l'immagine ha un limite di altezza che dipende dall'altezza del div box
        if(imm.naturalHeight > el.clientHeight){
            imm.style.height = el.clientHeight + "px";
        }

        //dimensioni della finestra
        //alert(innerWidth); 1280
        //alert(innerHeight); 577

        var timings = {
            duration: 2000
        };

        var keyframes = [
            {
                transform: 'rotate(0) scale(0%,0%)',
                opacity: 0
            },
            {
                transform: 'rotate(360deg) scale(100%,100%)',
                opacity: 1
            }
        ];

        var timings2 = {
            duration: 18000,
            fill: 'both'
        };

        var keyframes2 = [
            {
                offsetDistance: '0%'
            },
            {
                offsetDistance: '100%'
            }
        ];

        var effects = [
            new KeyframeEffect(el,keyframes,timings),
            new KeyframeEffect(el,keyframes2,timings2)
        ];

        var sequence = new SequenceEffect(effects);

        console.log()

        document.timeline.play(sequence);


    };
    var socket = io();
    socket.on('connect', function() {
        socket.emit('my event', {data: 'I\'m connected!'});
    });
    socket.on('response', function(msg) {
        const split_word=JSON.parse(msg);
        console.log(split_word["all_data"]);
        if(split_word["all_data"]["link"].length>0){
            move(split_word["all_data"]["link"][0]);
        }
    });
</script>
</html>